language: node_js
dist: jammy
sudo: required
node_js: stable
install:
  - npm install
  - spago install
  - spago build
script:
  - npm run test
  - if [ "$TRAVIS_BRANCH" == "master" ]; then npm run tidy-check; fi
after_success:
- >-
  test $TRAVIS_TAG &&
  echo $GITHUB_TOKEN | pulp login &&
  echo y | pulp publish --no-push
